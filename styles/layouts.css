/* page header */
h1 {
	margin-top: calc(var(--line-height-display) + 20px);
	grid-column: content-left / content-right;
}
header {
	margin-bottom: 100px;
	display: grid;
	grid-template-columns: var(--grid-columns);
	gap: var(--line-height-body) var(--column-gap);
}
header p {
	grid-column: content-left / span min(6, var(--column-count));
}
header.sentence {
	margin-bottom: var(--line-height-display);
}

/* main page sections */
.major-thing {
	display: grid;
	grid-template-columns: var(--grid-columns);
	column-gap: var(--column-gap);

	border-top: 1px solid var(--red);
	padding-top: 40px;
}
.major-thing + .major-thing {
	margin-top: 60px;
}
@media (width < 700px) {
	.major-thing {
		padding-top: 20px;
	}
}

/* left-right section layout */
.hanging-title-layout {
	--body-column-start: calc(var(--column-count) / 2);
	--hanging-title-row-gap: var(--line-height-section_title);
	font-size: var(--font-size-section_title);
	line-height: var(--line-height-section_title);	
	row-gap: var(--hanging-title-row-gap);
	align-items: baseline;
}
.hanging-title-layout + .hanging-title-layout {
	margin-top: calc(4 * var(--line-height-section_title));	
}
.hanging-title-layout h2 {
	grid-column: content-left / span clamp(2, calc(var(--column-count) - 6), 3);
}
.hanging-title-layout h2 ~ *,
.hanging-title-layout div * {
	grid-column: var(--body-column-start) / content-right;
}
.hanging-title-layout h3,
.hanging-title-layout h4 {
	font-size: var(--font-size-label);
	line-height: var(--line-height-label);
	font-variant: all-small-caps;
}
.hanging-title-layout h3 {
	color: var(--red);
	margin-bottom: calc(0.5 * var(--line-height-body));
}
.hanging-title-layout h4 {
	color: var(--grey);
	display: inline-block;
}
/* left-right with subsections */
.hanging-title-layout div {
	display: contents;
	/* allow children to inherit grid properties */
	grid-column: inherit;
	gap: inherit;
}
.hanging-title-layout .detail-section {
	--compact-column-end: calc(-1 - clamp(0, var(--column-count) - 11, 1));
	grid-column: var(--body-column-start) / var(--compact-column-end);
	font-size: var(--font-size-body);
	line-height: var(--line-height-body);
	/* override vertical rhythm of outer container */
	padding-bottom: calc(2 * var(--line-height-body) - var(--hanging-title-row-gap));
}
/* section divider with pseudoelement for more flexibility in width */
.hanging-title-layout .detail-section + .detail-section::before {
	content: '';
	display: block;
	border-top: 1px solid var(--grey-decorative);
	margin-bottom: var(--line-height-body);
}
@media (width < 700px) {
	.hanging-title-layout {
		--body-column-start: 1; /* use number to allow offsets using calc */
	}
	.hanging-title-layout h2 {
		grid-column-end: content-right;
	}
	.hanging-title-layout .detail-section {
		grid-column: content-left / content-right;
	}
}

/* compact layout for multiple lists */
.compact-list > * + * {
	margin-top: calc(0.5 * var(--line-height-body));
}
.compact-list section {
	display: flex;
	flex-wrap: wrap;
	row-gap: calc(0.5 * var(--line-height-body));
}
/* lay out list inline with previous label */
.compact-list h4 + .inline-list {
	display: contents;
}
.compact-list h4 + .inline-list :first-child {
	margin-left: 0.5em;
}

/* portfolio page layout */
#projects > li {
	padding-top: var(--line-height-body);
	row-gap: var(--line-height-body);
	justify-items: start;
}
#projects > li::before {
	/* reset list style */
	display: none;
}
#projects > li > * {
	grid-column: content-left / span calc(var(--column-count) / 2);
}
#projects h2 {
	font-size: var(--font-size-display_list_title);
	line-height: var(--line-height-display_list_title);
}
#projects h2 a {
	color: var(--black);
	text-decoration: none;
}
#projects p,
#projects .cta,
#projects .roles {
	font-size: var(--font-size-label);
	line-height: var(--line-height-label);
}
#projects p {
	max-width: 28em;
}
#projects .roles,
#projects .cta {
	font-variant: all-small-caps;
}
#projects .cta {
	color: var(--red);
	text-decoration: none;
	/* larger target area */
	padding: calc(0.5 * var(--line-height-body)) 0;
	padding-right: 6px;
	margin: calc(-0.5 * var(--line-height-body)) 0;
}
#projects .cta::after {
	background-color: currentColor;
	content: '';
	display: inline-block;
	width: 13px;
	height: 6px;
	mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 13 6'%3E%3Cpath stroke='%23000' d='M0 3h11.5M9.75 1l2 2-2 2' fill='none'/%3E%3C/svg%3E") no-repeat center;
	margin-top: -1px;
	margin-left: 5px;
	transition: transform ease-in-out 200ms;
}
#projects .cta:hover,
#projects .cta:focus,
#projects .thumbnail-link:hover ~ .cta,
#projects .thumbnail-link:focus ~ .cta,
#projects h2:hover ~ .cta,
#projects h2:focus-within ~ .cta {
	text-decoration: underline;
}
#projects .cta:hover::after,
#projects .cta:focus::after,
#projects .thumbnail-link:hover ~ .cta::after,
#projects .thumbnail-link:focus ~ .cta::after,
#projects h2:hover ~ .cta::after,
#projects h2:focus-within ~ .cta::after {
	transform: translateX(4px);
}
#projects .roles {
	font-family: "Fanwood Text";
	opacity: 0.7;
	order: -1;
	margin-bottom: calc(-0.5 * var(--line-height-body));
}
#projects .thumbnail-link {
	grid-row-start: 1;
	grid-column: span calc(var(--column-count) / 2 - 1) / content-right;
	grid-row-end: span 4;
}
#projects .thumbnail-link img {
	max-width: 100%;
}
@media (width < 850px) {
	#projects > li > * {
		grid-column-end: content-right;
	}
	#projects .thumbnail-link {
		grid-column-start: content-left;
		order: -2;
	}
}
